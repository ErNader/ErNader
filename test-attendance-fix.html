<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª</title>
    <link href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 2px solid #ddd; 
            border-radius: 8px; 
            background-color: #f8f9fa;
        }
        .test-section h3 { 
            color: #333; 
            margin-bottom: 15px; 
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
        }
        .test-button { 
            margin: 5px; 
            padding: 10px 20px; 
            font-size: 14px;
        }
        .status { 
            padding: 15px; 
            margin: 15px 0; 
            border-radius: 8px; 
            font-weight: bold;
        }
        .status.success { 
            background-color: #d4edda; 
            border: 2px solid #c3e6cb; 
            color: #155724; 
        }
        .status.error { 
            background-color: #f8d7da; 
            border: 2px solid #f5c6cb; 
            color: #721c24; 
        }
        .status.warning { 
            background-color: #fff3cd; 
            border: 2px solid #ffeaa7; 
            color: #856404; 
        }
        .status.info { 
            background-color: #d1ecf1; 
            border: 2px solid #bee5eb; 
            color: #0c5460; 
        }
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 8px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .feature-card h4 {
            color: #007bff;
            margin-bottom: 10px;
        }
        .feature-card p {
            color: #666;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª ØªØ³Øª Ø³ÛŒØ³ØªÙ… Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª</h1>
        <p>Ø§ÛŒÙ† ØµÙØ­Ù‡ Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø³ÛŒØ³ØªÙ… Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
        
        <!-- ØªØ³Øª ÙˆØ±ÙˆØ¯ -->
        <div class="test-section">
            <h3>ğŸ” ØªØ³Øª ÙˆØ±ÙˆØ¯</h3>
            <p>Ø§Ø¨ØªØ¯Ø§ Ø¨Ø§ ÛŒÚ©ÛŒ Ø§Ø² Ø­Ø³Ø§Ø¨â€ŒÙ‡Ø§ÛŒ Ø²ÛŒØ± ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯:</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Ù…Ø¯ÛŒØ± Ø³ÛŒØ³ØªÙ…</h4>
                    <p>Ú©Ø¯ Ù…Ù„ÛŒ: 1234567890</p>
                    <p>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±: admin123</p>
                    <button onclick="testLogin('1234567890', 'admin123')" class="btn btn-primary test-button">ÙˆØ±ÙˆØ¯ Ù…Ø¯ÛŒØ±</button>
                </div>
                <div class="feature-card">
                    <h4>Ø±Ø§Ø¨Ø· (Ø§Ø­Ù…Ø¯ Ø±Ø¶Ø§ÛŒÛŒ)</h4>
                    <p>Ú©Ø¯ Ù…Ù„ÛŒ: 1111111111</p>
                    <p>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±: 123456</p>
                    <button onclick="testLogin('1111111111', '123456')" class="btn btn-success test-button">ÙˆØ±ÙˆØ¯ Ø±Ø§Ø¨Ø·</button>
                </div>
                <div class="feature-card">
                    <h4>Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ² (Ø¹Ù„ÛŒ Ø§Ø­Ù…Ø¯ÛŒ)</h4>
                    <p>Ú©Ø¯ Ù…Ù„ÛŒ: 3333333333</p>
                    <p>Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±: 123456</p>
                    <button onclick="testLogin('3333333333', '123456')" class="btn btn-info test-button">ÙˆØ±ÙˆØ¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²</button>
                </div>
            </div>
            <div id="login-status"></div>
        </div>

        <!-- ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ -->
        <div class="test-section">
            <h3>ğŸ“Š ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</h3>
            <p>Ø§ÛŒÙ† Ø¨Ø®Ø´ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª:</p>
            <button onclick="testAttendanceManagement()" class="btn btn-primary test-button">Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</button>
            <button onclick="testAttendanceEdit()" class="btn btn-success test-button">ÙˆÛŒØ±Ø§ÛŒØ´ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</button>
            <button onclick="testAttendanceAnalytics()" class="btn btn-info test-button">ØªØ­Ù„ÛŒÙ„ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</button>
            <button onclick="testRecordAttendance()" class="btn btn-warning test-button">Ø«Ø¨Øª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨</button>
            <div id="attendance-test-status"></div>
        </div>

        <!-- ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø±Ø§Øª -->
        <div class="test-section">
            <h3>ğŸ“ ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø±Ø§Øª</h3>
            <p>Ø§ÛŒÙ† Ø¨Ø®Ø´ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª:</p>
            <button onclick="testGradesOverview()" class="btn btn-primary test-button">Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ù†Ù…Ø±Ø§Øª</button>
            <button onclick="testGradesEdit()" class="btn btn-success test-button">ÙˆÛŒØ±Ø§ÛŒØ´ Ù†Ù…Ø±Ø§Øª</button>
            <button onclick="testGradesAnalytics()" class="btn btn-info test-button">ØªØ­Ù„ÛŒÙ„ Ù†Ù…Ø±Ø§Øª</button>
            <div id="grades-test-status"></div>
        </div>

        <!-- ØªØ³Øª Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ -->
        <div class="test-section">
            <h3>ğŸ“ˆ ØªØ³Øª Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§</h3>
            <p>Ø§ÛŒÙ† Ø¨Ø®Ø´ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª:</p>
            <button onclick="testGeneralReports()" class="btn btn-primary test-button">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒ</button>
            <button onclick="testFinancialReports()" class="btn btn-success test-button">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ</button>
            <button onclick="testPerformanceReports()" class="btn btn-info test-button">Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯</button>
            <div id="reports-test-status"></div>
        </div>

        <!-- ØªØ³Øª ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
        <div class="test-section">
            <h3>âš™ï¸ ØªØ³Øª ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</h3>
            <p>Ø§ÛŒÙ† Ø¨Ø®Ø´ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±Ø§Ù† Ù‚Ø§Ø¨Ù„ Ø¯Ø³ØªØ±Ø³ÛŒ Ø§Ø³Øª:</p>
            <button onclick="testSystemSettings()" class="btn btn-primary test-button">ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ…</button>
            <button onclick="testRequestManagement()" class="btn btn-success test-button">Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§</button>
            <div id="settings-test-status"></div>
        </div>

        <!-- ØªØ³Øª Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù -->
        <div class="test-section">
            <h3>ğŸ¯ ØªØ³Øª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡</h3>
            <p>ØªØ³Øª Ú©Ù†ÛŒØ¯ Ú©Ù‡ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø±Ø§ÛŒ Ù‡Ø± Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ù‡ ØµÙˆØ±Øª Ø¬Ø¯Ø§Ú¯Ø§Ù†Ù‡ Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯:</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ ØªÙ‚ÙˆÛŒØªÛŒ Ø±ÛŒØ§Ø¶ÛŒ</h4>
                    <p>Ø¨Ø±Ù†Ø§Ù…Ù‡ ID: 1</p>
                    <button onclick="testProgramAttendance(1)" class="btn btn-primary test-button">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø­Ø¶ÙˆØ±</button>
                </div>
                <div class="feature-card">
                    <h4>Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ</h4>
                    <p>Ø¨Ø±Ù†Ø§Ù…Ù‡ ID: 2</p>
                    <button onclick="testProgramAttendance(2)" class="btn btn-success test-button">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø­Ø¶ÙˆØ±</button>
                </div>
                <div class="feature-card">
                    <h4>Ø§Ø±Ø¯ÙˆÙ‡Ø§ÛŒ ØªÙØ±ÛŒØ­ÛŒ</h4>
                    <p>Ø¨Ø±Ù†Ø§Ù…Ù‡ ID: 3</p>
                    <button onclick="testProgramAttendance(3)" class="btn btn-info test-button">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø­Ø¶ÙˆØ±</button>
                </div>
            </div>
            <div id="program-attendance-status"></div>
        </div>

        <!-- ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ -->
        <div class="test-section">
            <h3>ğŸ“Š ÙˆØ¶Ø¹ÛŒØª ÙØ¹Ù„ÛŒ Ø³ÛŒØ³ØªÙ…</h3>
            <div id="current-system-status"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script src="script.js"></script>
    <script>
        let currentTestUser = null;

        // ØªØ³Øª ÙˆØ±ÙˆØ¯
        async function testLogin(nationalId, password) {
            const statusDiv = document.getElementById('login-status');
            statusDiv.innerHTML = '<div class="status warning">Ø¯Ø± Ø­Ø§Ù„ ÙˆØ±ÙˆØ¯...</div>';
            
            try {
                const result = await supabaseHelper.loginUser(nationalId, password);
                if (result.success) {
                    currentTestUser = result.user;
                    statusDiv.innerHTML = `<div class="status success">ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚! Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯ ${currentTestUser.full_name} (${currentTestUser.role})</div>`;
                    updateSystemStatus();
                } else {
                    statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§ Ø¯Ø± ÙˆØ±ÙˆØ¯: ${result.error}</div>`;
                }
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        // ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨
        function testAttendanceManagement() {
            const statusDiv = document.getElementById('attendance-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showAttendanceManagement();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testAttendanceEdit() {
            const statusDiv = document.getElementById('attendance-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                editAttendanceModal();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testAttendanceAnalytics() {
            const statusDiv = document.getElementById('attendance-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showAttendanceAnalytics();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ ØªØ­Ù„ÛŒÙ„ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testRecordAttendance() {
            const statusDiv = document.getElementById('attendance-test-status');
            if (!currentTestUser || (currentTestUser.role !== 'admin' && currentTestUser.role !== 'coordinator')) {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ùˆ Ø±Ø§Ø¨Ø·â€ŒÙ‡Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø«Ø¨Øª Ú©Ù†Ù†Ø¯</div>';
                return;
            }
            
            try {
                recordAttendance();
                statusDiv.innerHTML = '<div class="status success">ÙØ±Ù… Ø«Ø¨Øª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        // ØªØ³Øª Ù…Ø¯ÛŒØ±ÛŒØª Ù†Ù…Ø±Ø§Øª
        function testGradesOverview() {
            const statusDiv = document.getElementById('grades-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showGradesOverview();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ Ù†Ù…Ø§ÛŒ Ú©Ù„ÛŒ Ù†Ù…Ø±Ø§Øª Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testGradesEdit() {
            const statusDiv = document.getElementById('grades-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                editGrades();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ ÙˆÛŒØ±Ø§ÛŒØ´ Ù†Ù…Ø±Ø§Øª Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testGradesAnalytics() {
            const statusDiv = document.getElementById('grades-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showGradeAnalytics();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ ØªØ­Ù„ÛŒÙ„ Ù†Ù…Ø±Ø§Øª Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        // ØªØ³Øª Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§
        function testGeneralReports() {
            const statusDiv = document.getElementById('reports-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showGeneralReports();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ù„ÛŒ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testFinancialReports() {
            const statusDiv = document.getElementById('reports-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showFinancialReports();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testPerformanceReports() {
            const statusDiv = document.getElementById('reports-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showPerformanceReports();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        // ØªØ³Øª ØªÙ†Ø¸ÛŒÙ…Ø§Øª
        function testSystemSettings() {
            const statusDiv = document.getElementById('settings-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showSystemSettings();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø³ÛŒØ³ØªÙ… Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        function testRequestManagement() {
            const statusDiv = document.getElementById('settings-test-status');
            if (!currentTestUser || currentTestUser.role !== 'admin') {
                statusDiv.innerHTML = '<div class="status error">ÙÙ‚Ø· Ù…Ø¯ÛŒØ±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø¨Ù‡ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ù†Ø¯</div>';
                return;
            }
            
            try {
                showRequestManagement();
                statusDiv.innerHTML = '<div class="status success">Ù¾Ù†Ù„ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§Ø² Ø´Ø¯</div>';
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        // ØªØ³Øª Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡
        function testProgramAttendance(programId) {
            const statusDiv = document.getElementById('program-attendance-status');
            
            try {
                // ÙÛŒÙ„ØªØ± Ú©Ø±Ø¯Ù† Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¨Ø±Ù†Ø§Ù…Ù‡
                const programAttendance = attendance.filter(a => a.programId === programId);
                const program = programs.find(p => p.id === programId);
                
                if (programAttendance.length === 0) {
                    statusDiv.innerHTML = `<div class="status warning">Ù‡ÛŒÚ† Ø±Ú©ÙˆØ±Ø¯ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ "${program ? program.name : 'Ù†Ø§Ù…Ø´Ø®Øµ'}" ÛŒØ§ÙØª Ù†Ø´Ø¯</div>`;
                } else {
                    const presentCount = programAttendance.filter(a => a.status === 'present').length;
                    const absentCount = programAttendance.filter(a => a.status === 'absent').length;
                    const lateCount = programAttendance.filter(a => a.status === 'late').length;
                    const excusedCount = programAttendance.filter(a => a.status === 'excused').length;
                    
                    statusDiv.innerHTML = `
                        <div class="status success">
                            <h4>Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨ Ø¨Ø±Ù†Ø§Ù…Ù‡: ${program ? program.name : 'Ù†Ø§Ù…Ø´Ø®Øµ'}</h4>
                            <p>Ú©Ù„ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§: ${programAttendance.length}</p>
                            <p>Ø­Ø§Ø¶Ø±: ${presentCount} | ØºØ§ÛŒØ¨: ${absentCount} | ØªØ£Ø®ÛŒØ±: ${lateCount} | Ø¹Ø°Ø± Ù…ÙˆØ¬Ù‡: ${excusedCount}</p>
                            <p>Ù†Ø±Ø® Ø­Ø¶ÙˆØ±: ${Math.round((presentCount / programAttendance.length) * 100)}%</p>
                        </div>
                    `;
                }
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">Ø®Ø·Ø§: ${error.message}</div>`;
            }
        }

        // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³ÛŒØ³ØªÙ…
        function updateSystemStatus() {
            const statusDiv = document.getElementById('current-system-status');
            
            let status = '';
            
            if (currentTestUser) {
                status += `<div class="status success">Ú©Ø§Ø±Ø¨Ø± ÙØ¹Ù„ÛŒ: ${currentTestUser.full_name} (${currentTestUser.role})</div>`;
            } else {
                status += '<div class="status warning">Ù‡ÛŒÚ† Ú©Ø§Ø±Ø¨Ø±ÛŒ ÙˆØ§Ø±Ø¯ Ù†Ø´Ø¯Ù‡ Ø§Ø³Øª</div>';
            }
            
            status += `<div class="status info">ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø§Ù†Ø´â€ŒØ¢Ù…ÙˆØ²Ø§Ù†: ${students.length}</div>`;
            status += `<div class="status info">ØªØ¹Ø¯Ø§Ø¯ Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ‡Ø§: ${programs.length}</div>`;
            status += `<div class="status info">ØªØ¹Ø¯Ø§Ø¯ Ø±Ú©ÙˆØ±Ø¯Ù‡Ø§ÛŒ Ø­Ø¶ÙˆØ± Ùˆ ØºÛŒØ§Ø¨: ${attendance.length}</div>`;
            status += `<div class="status info">ØªØ¹Ø¯Ø§Ø¯ Ù†Ù…Ø±Ø§Øª: ${grades.length}</div>`;
            
            statusDiv.innerHTML = status;
        }

        // Ù…Ù‚Ø¯Ø§Ø±Ø¯Ù‡ÛŒ Ø§ÙˆÙ„ÛŒÙ‡
        document.addEventListener('DOMContentLoaded', function() {
            updateSystemStatus();
        });
    </script>
</body>
</html>