# راهنمای نصب و راه‌اندازی Supabase

## مرحله 1: ایجاد پروژه Supabase

1. به [supabase.com](https://supabase.com) بروید
2. حساب کاربری ایجاد کنید یا وارد شوید
3. روی "New Project" کلیک کنید
4. نام پروژه را وارد کنید (مثلاً: center-management)
5. رمز عبور دیتابیس را تنظیم کنید
6. منطقه (Region) مناسب را انتخاب کنید
7. روی "Create new project" کلیک کنید

## مرحله 2: اجرای SQL Schema

1. در داشبورد Supabase، به بخش "SQL Editor" بروید
2. فایل `supabase-schema.sql` را باز کنید
3. تمام محتوای فایل را کپی کنید
4. در SQL Editor، کد را paste کنید
5. روی "Run" کلیک کنید

## مرحله 3: تنظیم Storage Bucket

1. به بخش "Storage" بروید
2. روی "Create a new bucket" کلیک کنید
3. نام bucket را `documents` قرار دهید
4. روی "Create bucket" کلیک کنید

## مرحله 4: تنظیم RLS Policies

پس از اجرای SQL، سیاست‌های امنیتی به صورت خودکار ایجاد می‌شوند. برای امنیت بیشتر، می‌توانید سیاست‌های دقیق‌تری تعریف کنید.

## مرحله 5: تست اتصال

1. فایل `index.html` را در مرورگر باز کنید
2. به بخش Developer Tools بروید (F12)
3. در Console بررسی کنید که آیا خطای اتصال به Supabase وجود دارد یا خیر

## نکات مهم

### امنیت
- در محیط تولید، حتماً سیاست‌های RLS دقیق‌تری تعریف کنید
- رمزهای عبور را hash کنید
- از HTTPS استفاده کنید

### عملکرد
- ایندکس‌های مناسب ایجاد شده‌اند
- برای بهبود عملکرد، می‌توانید ایندکس‌های بیشتری اضافه کنید

### پشتیبان‌گیری
- Supabase به صورت خودکار از دیتابیس پشتیبان می‌گیرد
- برای اطمینان بیشتر، می‌توانید پشتیبان‌گیری دستی نیز انجام دهید

## عیب‌یابی

### خطای اتصال
اگر با خطای اتصال مواجه شدید:
1. URL و API Key را بررسی کنید
2. مطمئن شوید که پروژه Supabase فعال است
3. بررسی کنید که جداول ایجاد شده‌اند

### خطای CORS
اگر با خطای CORS مواجه شدید:
1. در Supabase، به بخش Settings > API بروید
2. دامنه‌های مجاز را اضافه کنید

### خطای RLS
اگر با خطای RLS مواجه شدید:
1. سیاست‌های امنیتی را بررسی کنید
2. مطمئن شوید که کاربر احراز هویت شده است

## اطلاعات اتصال

پس از ایجاد پروژه، اطلاعات زیر را در فایل `supabase-config.js` قرار دهید:

```javascript
const SUPABASE_URL = 'https://your-project-id.supabase.co';
const SUPABASE_ANON_KEY = 'your-anon-key';
```

این اطلاعات در بخش Settings > API در داشبورد Supabase قابل مشاهده است.

## کاربر ادمین

پس از اجرای SQL، یک کاربر ادمین با مشخصات زیر ایجاد می‌شود:

- کد ملی: 1234567890
- رمز عبور: admin123
- نقش: admin

برای امنیت بیشتر، حتماً این رمز عبور را تغییر دهید.